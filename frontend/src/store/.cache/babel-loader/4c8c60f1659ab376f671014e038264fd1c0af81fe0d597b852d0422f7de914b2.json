{"ast":null,"code":"var _jsxFileName = \"F:\\\\Study\\\\test_project\\\\LinkShortener\\\\frontend\\\\src\\\\components\\\\Socket.js\",\n  _s = $RefreshSig$();\nimport { useContext } from \"react\";\nimport { createSearchParams, useNavigate } from \"react-router-dom\";\nimport { observer } from \"mobx-react-lite\";\nimport { Box, Typography } from \"@mui/material\";\nimport { LoadingButton } from \"@mui/lab\";\nimport { Context } from \"../index\";\nimport { deleteSocket } from \"../http/SocketApi\";\nimport { normalizeDate, normalizeShortUrl } from \"../utils/SocketUtils\";\nimport { CopyButton } from \"./ui/CopyButton\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Socket = _s(observer(_c = _s(_ref => {\n  _s();\n  let {\n    num,\n    socket\n  } = _ref;\n  // Компонент отображения сокета\n  // num - номер\n  // socket - сокет\n  const navigate = useNavigate();\n  const {\n    socketList,\n    pagination,\n    loading\n  } = useContext(Context);\n  const deleteButtonClicked = async () => {\n    // Обработчик нажатия кнопки удаления сокета\n    loading.setIsButtonLoading(true);\n    await deleteSocket({\n      shortUrl: socket.shortUrl\n    });\n    removeSocket();\n    loading.setIsButtonLoading(false);\n  };\n  const removeSocket = () => {\n    // Удаление сокета из mobx хранилища\n    socketList.removeSocket(num - 1 - pagination.firstItemIndex);\n    if (!socketList.sockets.length) {\n      pagination.setPage(pagination.page - 1);\n      navigateToPreviousPage();\n    }\n  };\n  const navigateToPreviousPage = () => {\n    // Перенаправление на предыдущую страницу\n    navigate({\n      search: createSearchParams({\n        page: pagination.page,\n        pageSize: pagination.pageSize\n      }).toString()\n    });\n  };\n  const isLastSocket = () => {\n    // Проверка является ли сокет последним на странице\n    return socketList.sockets.length === num - pagination.firstItemIndex;\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      paddingBottom: 1\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: \"flex\",\n        alignItems: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        children: [num, \") \\u041F\\u043E\\u043B\\u043D\\u044B\\u0439 URL: \", socket.fullUrl]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CopyButton, {\n        item: socket.fullUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: \"flex\",\n        alignItems: \"center\",\n        marginBottom: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        children: [\"\\u041A\\u043E\\u0440\\u043E\\u0442\\u043A\\u0438\\u0439 URL: \", normalizeShortUrl(socket.shortUrl)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CopyButton, {\n        item: normalizeShortUrl(socket.shortUrl)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      sx: {\n        marginBottom: 1\n      },\n      children: [\"\\u0414\\u0430\\u0442\\u0430 \\u0441\\u043E\\u0437\\u0434\\u0430\\u043D\\u0438\\u044F: \", normalizeDate(socket.createdAt)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: \"flex\",\n        alignItems: \"center\",\n        marginBottom: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        sx: {\n          marginRight: 2\n        },\n        children: [\"\\u041F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u044B: \", socket.views]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoadingButton, {\n        variant: \"contained\",\n        onClick: deleteButtonClicked,\n        loading: loading.isButtonLoading,\n        children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), isLastSocket() ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}, \"+2o6pJZo6IEbXbnS8ZcQwgZOf+A=\", false, function () {\n  return [useNavigate];\n})), \"+2o6pJZo6IEbXbnS8ZcQwgZOf+A=\", false, function () {\n  return [useNavigate];\n});\n_c2 = Socket;\nexport { Socket };\nvar _c, _c2;\n$RefreshReg$(_c, \"Socket$observer\");\n$RefreshReg$(_c2, \"Socket\");","map":{"version":3,"names":["useContext","createSearchParams","useNavigate","observer","Box","Typography","LoadingButton","Context","deleteSocket","normalizeDate","normalizeShortUrl","CopyButton","jsxDEV","_jsxDEV","Fragment","_Fragment","Socket","_s","_c","_ref","num","socket","navigate","socketList","pagination","loading","deleteButtonClicked","setIsButtonLoading","shortUrl","removeSocket","firstItemIndex","sockets","length","setPage","page","navigateToPreviousPage","search","pageSize","toString","isLastSocket","sx","paddingBottom","children","display","alignItems","fullUrl","fileName","_jsxFileName","lineNumber","columnNumber","item","marginBottom","createdAt","marginRight","views","variant","onClick","isButtonLoading","_c2","$RefreshReg$"],"sources":["F:/Study/test_project/LinkShortener/frontend/src/components/Socket.js"],"sourcesContent":["import { useContext } from \"react\";\r\nimport { createSearchParams, useNavigate } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { Box, Typography } from \"@mui/material\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\n\r\nimport { Context } from \"../index\";\r\nimport { deleteSocket } from \"../http/SocketApi\";\r\nimport { normalizeDate, normalizeShortUrl } from \"../utils/SocketUtils\";\r\n\r\nimport { CopyButton } from \"./ui/CopyButton\";\r\n\r\nconst Socket = observer(({num, socket}) => {\r\n  // Компонент отображения сокета\r\n  // num - номер\r\n  // socket - сокет\r\n  const navigate = useNavigate();\r\n  const { socketList, pagination, loading } = useContext(Context);\r\n\r\n  const deleteButtonClicked = async () => {\r\n    // Обработчик нажатия кнопки удаления сокета\r\n    loading.setIsButtonLoading(true);\r\n\r\n    await deleteSocket({\r\n      shortUrl: socket.shortUrl,\r\n    });\r\n    removeSocket();\r\n    loading.setIsButtonLoading(false);\r\n  };\r\n\r\n  const removeSocket = () => {\r\n    // Удаление сокета из mobx хранилища\r\n    socketList.removeSocket(num - 1 - pagination.firstItemIndex);\r\n    if (!socketList.sockets.length) {\r\n      pagination.setPage(pagination.page - 1);\r\n      navigateToPreviousPage();\r\n    }\r\n  };\r\n\r\n  const navigateToPreviousPage = () => {\r\n    // Перенаправление на предыдущую страницу\r\n    navigate({\r\n      search: createSearchParams({\r\n        page: pagination.page,\r\n        pageSize: pagination.pageSize,\r\n      }).toString(),\r\n    });\r\n  };\r\n\r\n  const isLastSocket = () => {\r\n    // Проверка является ли сокет последним на странице\r\n    return socketList.sockets.length === num - pagination.firstItemIndex;\r\n  };\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        paddingBottom: 1,\r\n      }}\r\n    >\r\n      <Box\r\n        sx={{\r\n          display: \"flex\",\r\n          alignItems:\"center\",\r\n        }}\r\n      >\r\n        <Typography>\r\n          {num}) Полный URL: {socket.fullUrl}\r\n        </Typography>\r\n        <CopyButton\r\n          item={socket.fullUrl}\r\n        />\r\n      </Box>\r\n\r\n      <Box\r\n        sx={{\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          marginBottom: 1,\r\n        }}\r\n      >\r\n        <Typography>\r\n          Короткий URL: {normalizeShortUrl(socket.shortUrl)}\r\n        </Typography>\r\n        <CopyButton\r\n          item={normalizeShortUrl(socket.shortUrl)}\r\n        />\r\n      </Box>\r\n\r\n      <Typography\r\n        sx={{\r\n          marginBottom: 1,\r\n        }}\r\n      >\r\n        Дата создания: {normalizeDate(socket.createdAt)}\r\n      </Typography>\r\n\r\n      <Box\r\n        sx={{\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          marginBottom: 1,\r\n        }}\r\n      >\r\n        <Typography\r\n          sx={{\r\n            marginRight: 2,\r\n          }}\r\n        >\r\n          Просмотры: {socket.views}\r\n        </Typography>\r\n\r\n        <LoadingButton\r\n          variant=\"contained\"\r\n          onClick={deleteButtonClicked}\r\n          loading={loading.isButtonLoading}\r\n        >\r\n          Удалить\r\n        </LoadingButton>\r\n      </Box>\r\n      {\r\n        isLastSocket()\r\n          ?\r\n          <></>\r\n          :\r\n          <hr/>\r\n      }\r\n    </Box>\r\n  );\r\n});\r\n\r\nexport { Socket };\r\n"],"mappings":";;AAAA,SAASA,UAAU,QAAQ,OAAO;AAClC,SAASC,kBAAkB,EAAEC,WAAW,QAAQ,kBAAkB;AAClE,SAASC,QAAQ,QAAQ,iBAAiB;AAC1C,SAASC,GAAG,EAAEC,UAAU,QAAQ,eAAe;AAC/C,SAASC,aAAa,QAAQ,UAAU;AAExC,SAASC,OAAO,QAAQ,UAAU;AAClC,SAASC,YAAY,QAAQ,mBAAmB;AAChD,SAASC,aAAa,EAAEC,iBAAiB,QAAQ,sBAAsB;AAEvE,SAASC,UAAU,QAAQ,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAE7C,MAAMC,MAAM,GAAAC,EAAA,CAAGd,QAAQ,CAAAe,EAAA,GAAAD,EAAA,CAACE,IAAA,IAAmB;EAAAF,EAAA;EAAA,IAAlB;IAACG,GAAG;IAAEC;EAAM,CAAC,GAAAF,IAAA;EACpC;EACA;EACA;EACA,MAAMG,QAAQ,GAAGpB,WAAW,EAAE;EAC9B,MAAM;IAAEqB,UAAU;IAAEC,UAAU;IAAEC;EAAQ,CAAC,GAAGzB,UAAU,CAACO,OAAO,CAAC;EAE/D,MAAMmB,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IACtC;IACAD,OAAO,CAACE,kBAAkB,CAAC,IAAI,CAAC;IAEhC,MAAMnB,YAAY,CAAC;MACjBoB,QAAQ,EAAEP,MAAM,CAACO;IACnB,CAAC,CAAC;IACFC,YAAY,EAAE;IACdJ,OAAO,CAACE,kBAAkB,CAAC,KAAK,CAAC;EACnC,CAAC;EAED,MAAME,YAAY,GAAGA,CAAA,KAAM;IACzB;IACAN,UAAU,CAACM,YAAY,CAACT,GAAG,GAAG,CAAC,GAAGI,UAAU,CAACM,cAAc,CAAC;IAC5D,IAAI,CAACP,UAAU,CAACQ,OAAO,CAACC,MAAM,EAAE;MAC9BR,UAAU,CAACS,OAAO,CAACT,UAAU,CAACU,IAAI,GAAG,CAAC,CAAC;MACvCC,sBAAsB,EAAE;IAC1B;EACF,CAAC;EAED,MAAMA,sBAAsB,GAAGA,CAAA,KAAM;IACnC;IACAb,QAAQ,CAAC;MACPc,MAAM,EAAEnC,kBAAkB,CAAC;QACzBiC,IAAI,EAAEV,UAAU,CAACU,IAAI;QACrBG,QAAQ,EAAEb,UAAU,CAACa;MACvB,CAAC,CAAC,CAACC,QAAQ;IACb,CAAC,CAAC;EACJ,CAAC;EAED,MAAMC,YAAY,GAAGA,CAAA,KAAM;IACzB;IACA,OAAOhB,UAAU,CAACQ,OAAO,CAACC,MAAM,KAAKZ,GAAG,GAAGI,UAAU,CAACM,cAAc;EACtE,CAAC;EAED,oBACEjB,OAAA,CAACT,GAAG;IACFoC,EAAE,EAAE;MACFC,aAAa,EAAE;IACjB,CAAE;IAAAC,QAAA,gBAEF7B,OAAA,CAACT,GAAG;MACFoC,EAAE,EAAE;QACFG,OAAO,EAAE,MAAM;QACfC,UAAU,EAAC;MACb,CAAE;MAAAF,QAAA,gBAEF7B,OAAA,CAACR,UAAU;QAAAqC,QAAA,GACRtB,GAAG,EAAC,8CAAc,EAACC,MAAM,CAACwB,OAAO;MAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACvB,eACbpC,OAAA,CAACF,UAAU;QACTuC,IAAI,EAAE7B,MAAM,CAACwB;MAAQ;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACrB;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACE,eAENpC,OAAA,CAACT,GAAG;MACFoC,EAAE,EAAE;QACFG,OAAO,EAAE,MAAM;QACfC,UAAU,EAAE,QAAQ;QACpBO,YAAY,EAAE;MAChB,CAAE;MAAAT,QAAA,gBAEF7B,OAAA,CAACR,UAAU;QAAAqC,QAAA,GAAC,wDACI,EAAChC,iBAAiB,CAACW,MAAM,CAACO,QAAQ,CAAC;MAAA;QAAAkB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACtC,eACbpC,OAAA,CAACF,UAAU;QACTuC,IAAI,EAAExC,iBAAiB,CAACW,MAAM,CAACO,QAAQ;MAAE;QAAAkB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACzC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACE,eAENpC,OAAA,CAACR,UAAU;MACTmC,EAAE,EAAE;QACFW,YAAY,EAAE;MAChB,CAAE;MAAAT,QAAA,GACH,6EACgB,EAACjC,aAAa,CAACY,MAAM,CAAC+B,SAAS,CAAC;IAAA;MAAAN,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACpC,eAEbpC,OAAA,CAACT,GAAG;MACFoC,EAAE,EAAE;QACFG,OAAO,EAAE,MAAM;QACfC,UAAU,EAAE,QAAQ;QACpBO,YAAY,EAAE;MAChB,CAAE;MAAAT,QAAA,gBAEF7B,OAAA,CAACR,UAAU;QACTmC,EAAE,EAAE;UACFa,WAAW,EAAE;QACf,CAAE;QAAAX,QAAA,GACH,0DACY,EAACrB,MAAM,CAACiC,KAAK;MAAA;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACb,eAEbpC,OAAA,CAACP,aAAa;QACZiD,OAAO,EAAC,WAAW;QACnBC,OAAO,EAAE9B,mBAAoB;QAC7BD,OAAO,EAAEA,OAAO,CAACgC,eAAgB;QAAAf,QAAA,EAClC;MAED;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAgB;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACZ,EAEJV,YAAY,EAAE,gBAEZ1B,OAAA,CAAAE,SAAA,oBAAK,gBAELF,OAAA;MAAAiC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAK;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QAEL;AAEV,CAAC;EAAA,QAjHkB/C,WAAW;AAAA,GAiH5B;EAAA,QAjHiBA,WAAW;AAAA,EAiH5B;AAACwD,GAAA,GArHG1C,MAAM;AAuHZ,SAASA,MAAM;AAAG,IAAAE,EAAA,EAAAwC,GAAA;AAAAC,YAAA,CAAAzC,EAAA;AAAAyC,YAAA,CAAAD,GAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}